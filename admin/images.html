<!DOCTYPE html>
<html>
<head>
  <title>Upload Images</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<h3>Upload Service Images</h3>

<select id="category" class="form-select mb-2">
  <option value="iron-gate">Iron Gate</option>
  <option value="staircase">Staircase</option>
  <option value="roofing">Roofing</option>
</select>

<input type="file" id="image" class="form-control mb-2">
<button class="btn btn-dark" onclick="upload()">Upload</button>

<script>
const API_BASE = "https://fabrication-backend.onrender.com";

function upload(){
  const imageInput = document.getElementById("image");
  const categoryInput = document.getElementById("category");

  if (!imageInput.files.length) {
    alert("Please select an image");
    return;
  }

  const fd = new FormData();
  fd.append("image", imageInput.files[0]);
  fd.append("category", categoryInput.value);

  fetch(`${API_BASE}/api/images`, {
    method: "POST",
    headers: {
      Authorization: `Bearer ${localStorage.getItem("adminToken")}`
    },
    body: fd
  })
  .then(res => {
    if (!res.ok) throw new Error("Upload failed");
    return res.json();
  })
  .then(() => alert("Uploaded successfully âœ…"))
  .catch(err => alert(err.message));
}
</script>

</body>
</html>
